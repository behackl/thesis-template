\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{bhthesis-style}[2026/02/16 Thesis styling for bhthesis.]

% Core packages
\RequirePackage[utf8]{inputenc}
\RequirePackage[charter]{mathdesign}
\RequirePackage{graphicx}
\RequirePackage{tikz}

\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage{thmtools}
\RequirePackage[framemethod=tikz]{mdframed}
\RequirePackage{xcolor}
\RequirePackage{wasysym}
\RequirePackage{soul}

\RequirePackage{mathtools}

\RequirePackage{fullpage}
\RequirePackage[Bjornstrup]{fncychap}
\ChTitleVar{\raggedright\Huge\sffamily\bfseries}
\ChNumVar{\fontsize{76}{80}\usefont{OT1}{pzc}{m}{n}\selectfont\color{tugred}}

\RequirePackage{hyperref}
\hypersetup{
    colorlinks,
    linkcolor={green!50!black},
    citecolor={green!50!black},
    urlcolor={green!50!black}
}

% Colors
\definecolor{aaulight}{RGB}{70,153,194}
\definecolor{aaudark}{RGB}{67,111,128}
\definecolor{kfuyellow}{RGB}{255, 204, 0}
\definecolor{kfuyellowlight}{RGB}{254, 250, 226}
\definecolor{tugred}{RGB}{238,37,86}

\newlength{\bhtheorempadding}
\setlength{\bhtheorempadding}{10pt}

\makeatletter

% Localized theorem names
\newcommand{\bh@selectlanguage}[2]{%
  \ifcsname iflanguage\endcsname
    \iflanguage{english}{#1}{#2}%
  \else
    \if@english #1\else #2\fi
  \fi
}
\newcommand{\bh@name@theorem}{\bh@selectlanguage{Theorem}{Satz}}
\newcommand{\bh@name@proposition}{\bh@selectlanguage{Proposition}{Proposition}}
\newcommand{\bh@name@lemma}{\bh@selectlanguage{Lemma}{Lemma}}
\newcommand{\bh@name@corollary}{\bh@selectlanguage{Corollary}{Korollar}}
\newcommand{\bh@name@definition}{\bh@selectlanguage{Definition}{Definition}}
\newcommand{\bh@name@remark}{\bh@selectlanguage{Remark}{Bemerkung}}
\newcommand{\bh@name@observation}{\bh@selectlanguage{Observation}{Beobachtung}}
\newcommand{\bh@name@example}{\bh@selectlanguage{Example}{Beispiel}}

% Theorem styles
\declaretheoremstyle[spaceabove=5pt, spacebelow=5pt,
  headfont={\sffamily\bfseries},
  shaded={
    bgcolor=kfuyellowlight,
    margin=\bhtheorempadding,
    textwidth=\dimexpr\linewidth-2\bhtheorempadding\relax,
  },
]{bhresult}

\declaretheorem[style=bhresult, name=\bh@name@theorem]{theorem}
\declaretheorem[style=bhresult, name=\bh@name@theorem, numbered=no]{theorem*}
\declaretheorem[style=bhresult, name=\bh@name@proposition, sibling=theorem]{proposition}
\declaretheorem[style=bhresult, name=\bh@name@proposition, numbered=no]{proposition*}
\declaretheorem[style=bhresult, name=\bh@name@lemma, sibling=theorem]{lemma}
\declaretheorem[style=bhresult, name=\bh@name@lemma, numbered=no]{lemma*}
\declaretheorem[style=bhresult, name=\bh@name@corollary, sibling=theorem]{corollary}
\declaretheorem[style=bhresult, name=\bh@name@corollary, numbered=no]{corollary*}


\declaretheoremstyle[spaceabove=0pt, spacebelow=0pt,
  headfont={\sffamily},
  mdframed={
    linecolor=kfuyellow,
    linewidth=1pt,
    roundcorner=5pt,
    innerleftmargin=1.35em,
    innerrightmargin=0.75em,
    innertopmargin=1em,
    innerbottommargin=1em,
    skipabove=0pt,
    skipbelow=0pt,
    extra={\begin{scope}
      \path[clip, mdfcorners] (O)--(O|-P)--(P)--(P|-O)--cycle;
      \path[fill=kfuyellow,draw=none] (O) rectangle ++(0.6em,\mdfboundingboxheight);
    \end{scope}}
  }]{bhdefinition}
\declaretheorem[style=bhdefinition, name=\bh@name@definition, sibling=theorem]{definition}
\declaretheorem[style=bhdefinition, name=\bh@name@definition, numbered=no]{definition*}

\declaretheoremstyle[headfont={\sffamily}, headformat={\setul{-1pt}{3pt}\setulcolor{kfuyellow}\ul{\mbox{\NAME}}}]{bhplain}
\declaretheorem[style=bhplain, name=\bh@name@example, numbered=no, qed={\pentagon}]{example}
\declaretheorem[style=bhplain, name=\bh@name@remark, numbered=no]{remark}
\declaretheorem[style=bhplain, name=\bh@name@observation, numbered=no]{observation}


% Data to appear on the title page
% \author and \title are defined by the latex kernel
\newcommand{\person}[5][]{
  \begin{minipage}[t]{#2}
    #1\fontsize{14}{18}\selectfont
    {\textsc{#3}}\\[0.25em]
    \fontsize{12}{16}\selectfont
    #4\\
    \fontsize{10}{14}\selectfont
    #5
  \end{minipage}
}

\gdef\@authorname{}
\gdef\@authornameone{}
\gdef\@authornamemore{}
\renewcommand\author[1]{\gdef\@author{#1}
  \let\@authorname\@authornameone}
\newcommand\authors[1]{\gdef\@author{#1}
  \let\@authorname\@authornamemore}
\renewcommand*{\@extratitle}{}
\renewcommand{\extratitle}[1]{\gdef\@extratitle{#1}}
\gdef\@reporttype{}
\newcommand \reporttype[1]{\gdef \@reporttype{#1}}
\gdef\@university{}
\newcommand \university[1]{\gdef \@university{#1}}
\gdef\@universityname{}
\newcommand \universityname[1]{\gdef \@universityname{#1}}
\gdef\@fakultaetname{}
\newcommand \fakultaetname[1]{\gdef \@fakultaetname{#1}}
\gdef\@studname{}
\newcommand \studname[1]{\gdef \@studname{#1}}
\gdef\@degree{{\bfseries\color{red} degree}}
\newcommand \degree[1]{\gdef \@degree{#1}}
\renewcommand{\and}{$\;\cdot\;$}
\gdef\@institute{}
\newcommand \institute[1]{\gdef \@institute{#1}}
\gdef\@involvedpeople{}
\newcommand \involvedpeople[1]{\gdef \@involvedpeople{#1}}
\gdef\@city{Graz}
\newcommand \city[1]{\gdef \@city{#1}}
\renewcommand*{\next@tpage}{\clearpage\thispagestyle{empty}}

% Title page format
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Bold Line

\newcommand{\bh@clear@title}{%
  \setcounter{footnote}{0}%
  \global\let\thanks\relax
  \global\let\maketitle\relax
  \global\let\@maketitle\relax
  \global\let\@thanks\@empty
  \global\let\@author\@empty
  \global\let\@date\@empty
  \global\let\@title\@empty
  \global\let\@reporttype\@empty
  \global\let\@university\@empty
  \global\let\@universityname\@empty
  \global\let\@institute\@empty
  \global\let\@city\@empty
  \global\let\@version\@empty
  \global\let\@uppertitleback\@empty
  \global\let\@lowertitleback\@empty
  \global\let\@dedication\@empty
  \global\let\author\relax
  \global\let\title\relax
  \global\let\date\relax
  \global\let\reporttype\@empty
  \global\let\university\@empty
  \global\let\universityname\@empty
  \global\let\institute\@empty
  \global\let\city\@empty
  \global\let\version\@empty
  \global\let\and\relax}

\if@titlepage
    \renewcommand*\maketitle[1][1]{\begin{titlepage}%
    \setcounter{page}{#1}
    \let\footnotesize\small
    \let\footnoterule\relax
    \let\footnote\thanks
    \renewcommand*\thefootnote{\@fnsymbol\c@footnote}%
    \let\@oldmakefnmark\@makefnmark
    \def\@makefnmark{\rlap\@oldmakefnmark}
    \ifx\@extratitle\@empty \else
        \noindent\@extratitle\next@tpage\cleardoublepage\thispagestyle{empty}
    \fi
    \large
    %
    % Logo zentrieren (oder auch nicht)
    %
    \ifx\@university\@empty\else
      \@university\par
      \vskip 1em
    \fi
    \begin{center}
    \fontsize{12}{14}\selectfont
    {\lineskip .5em%
      \begin{tabular}[t]{c}%
        \@author
      \end{tabular}\par}%
    \vskip 1em
    \HRule\par
    {\lineskip .5em%
     \sectfont\Huge
      \begin{tabular}[t]{c}%
        \@title
      \end{tabular}\par}%
    \HRule\par
    \vfill
    {\huge\textsc{\@reporttype}}
    \vskip 1em
    \if@withdegree
      \if@english
        submitted in fulfilment of the requirements for the degree of \\[0.5em]
      \else
        zur Erlangung des akademischen Grades \\[0.5em]
      \fi
      \@degree
    \else\fi
    \vfill
    {\textsc{\if@english Degree Programme\else Studium\fi}}\\[0.25em]
    {\Large\@studname}
    \vfill
    \@universityname \\[0.2em]
    \@fakultaetname
    \vfill
    \@involvedpeople


    \vfill
    \fontsize{12}{12}\selectfont
    \hfill \@city, \@date
  \end{center}\par
  \pagestyle{empty}
  \cleardoublepage
  \end{titlepage}
  \bh@clear@title}
\else
     \newcommand*\maketitle[1][1]{%\par
       \@tempcnta=#1\relax\ifnum\@tempcnta=1\else
         \ClassWarning{kluconf}
                      {Optional argument of \string\maketitle\space ignored
                       at\MessageBreak
                       notitlepage-mode}\fi
       \begingroup
         \renewcommand*\thefootnote{\@fnsymbol\c@footnote}%
         \let\@oldmakefnmark\@makefnmark
         \def\@makefnmark{\rlap\@oldmakefnmark}
         \if@twocolumn
           \ifnum \col@number=\@ne
             \@maketitle
           \else
             \twocolumn[\@maketitle]%
           \fi
         \else
           \newpage
           \global\@topnum\z@   % Prevents figures from going at top of page.
           \@maketitle
         \fi
         \thispagestyle{empty}\@thanks
       \endgroup
       \bh@clear@title}
\fi
\def\@maketitle{%
  \clearpage
  \let\footnote\thanks
  \begingroup
  \parskip\z@ \parsep\z@
  \ifx\@extratitle\@empty \else
      \noindent\@extratitle \next@tpage \if@twoside \null\next@tpage \fi
  \fi
  \begin{center}%
    \@university\par
    \ifx\@reporttype\@empty \else
        \vskip 1em
  {\sc\@reporttype}\par
    \fi
    \vskip 1em
    {\sectfont\huge \@title \par}%
    \vskip 15pt%
    {\lineskip .5em%
      \begin{tabular}[t]{c}%
        \@author
      \end{tabular}\par}%
    \vskip 15pt%
    \@date \par%
    \vskip \z@ \@plus 1em
    \ifx\@dedication\@empty \else
        \vskip 2em
        {\Large \@dedication \par}
    \fi
  \end{center}%
  \par
  \vskip 30pt
  \endgroup
}

\makeatother
